@model CreateProposalEditModel
@inject IUnitOfWork _uw
@{
    ViewData["page"] = "NewProposal";
    ViewData["Title"] = "پیشنهاد جدید";
    Layout = "Layout";
    var committees = _uw.CommitteeRepository.Get(c => c.StatusID == 1, include: s => s
                                                          .Include(c => c.Secretary))
                                                          .ToList();
}
<link rel="stylesheet" href="~/dist/css/animate.css">
<script src="~/dist/js/wow.min.js"></script>
<!-- bootstrap wysihtml5 - text editor -->
<link rel="stylesheet" href="../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
<div class="content-wrapper" style="min-height: 915.8px;">
    <section class="content-header">
        <h1 class="wow animate__animated animate__lightSpeedInRight">
            پیشنهاد جدید
        </h1>
        <ol class="breadcrumb">
            <li><a href="/Home/Index"><i class="fas fa-home"></i> خانه</a></li>
            <li><a href="#">پیشنهادات</a></li>
            <li class="active">پیشنهاد جدید</li>
        </ol>
    </section>

    <section class="content">
        <div class="row wow animate__animated animate__zoomInDown" data-wow-delay=".3s">
            <form id="form1" enctype="multipart/form-data" action="/Proposal/Create" method="post" class="col-md-12">
                <div class="box box-success">
                    <div class="box-header">
                        <h3 class="box-title">
                        </h3>
                        <!-- tools box -->
                        <div class="pull-right box-tools">
                            <button type="button" class="btn btn-default btn-sm" data-widget="collapse" data-toggle="tooltip"
                                    title="Collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                        </div>
                        <!-- /. tools -->
                    </div>
                    <div class="box-body pad">
                        <div class="row border border-danger">
                            <div class="col-md-12">
                                <div class="text-danger h4">
                                    @Html.ValidationSummary()
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="SubjectPr" class="control-label">عنوان پیشنهاد*</label>
                            <input name="SubjectPr" type="text" class="form-control" id="SubjectPr" placeholder="عنوان پیشنهاد">
                        </div>
                        <div class="callout callout-info">
                            <h4 style="color: #0097bc">توجه</h4>

                            <p style="color: #0097bc">  در صورت تطابق پیشنهاد شما با یکی از بذر های صادره از سوی منطقه، کد بذر مربوطه را در کادر زیر نوشته و در غیر این صورت در کادر زیر چیزی ننویسید.</p>
                            <div class="form-group">
                                <input name="codeBazr" type="text" class="form-control" id="codeBazr" placeholder="کد بذر را وارد کنید ...">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>شرح وضعیت موجود*</label>
                            <textarea name="CurrentDescPr" id="CurrentDescPr" style="width: 100%; height: 100px; font-size: 14px; line-height: 18px; border: 1px solid #dddddd; padding: 10px;"></textarea>
                        </div>
                        <div class="form-group">
                            <label>شرح پیشنهاد جدید*</label>
                            <textarea name="NewDesPr" id="NewDesPr" style="width: 100%; height: 100px; font-size: 14px; line-height: 18px; border: 1px solid #dddddd; padding: 10px;"></textarea>
                        </div>
                        <div class="box">
                            <!-- /.box-header -->
                            <div class="box-body table-responsive no-padding">
                                <table class="table table-bordered">
                                    <tbody>
                                        <tr>
                                            <th></th>
                                            <th>هزینه های اجرایی پیشنهاد(ريال)</th>
                                            <th>ثمره/درآمد اقتصادی پیشنهاد(ريال)</th>
                                            <th>صرفه جویی/سود(ريال)(درآمد منهای هزینه)</th>
                                        </tr>
                                        <tr>
                                            <td>روزانه</td>
                                            <td>
                                                <input name="EjraDaily" type="text" class="form-control rialformat NumberOnly " />
                                            </td>
                                            <td>
                                                <input name="GetDaily" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                            <td>
                                                <input name="SarfeDaily" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ماهانه</td>
                                            <td>
                                                <input name="EjraMonthly" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                            <td>
                                                <input name="GetMonthly" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                            <td>
                                                <input name="SarfeMonthly" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>سالانه</td>
                                            <td>
                                                <input name="EjraYear" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                            <td>
                                                <input name="GetYear" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                            <td>
                                                <input name="SarfeYear" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>پنج ساله</td>
                                            <td>
                                                <input name="Ejra5Year" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                            <td>
                                                <input name="Get5Year" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                            <td>
                                                <input name="Sarfe5Year" type="text" class="form-control rialformat NumberOnly" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- /.box-body -->
                        </div>
                        <div class="box">
                            <!-- /.box-header -->
                            <div class="box-header">
                                <h3 style="text-align:center">نتایج حاصل از پیشنهاد*</h3>
                            </div>
                            <div class="box-body table-responsive no-padding">
                                <table id="resultofproposalTable" class="table table-bordered">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch01" type="checkbox" value="true"> صرفه جویی در مصرف انرژی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch14" type="checkbox" value="true"> بهبود انگیزه های شغلی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch27" type="checkbox" value="true"> افزایش بازده تجهیزات
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch02" type="checkbox" value="true"> صرفه جویی در مصرف مواد
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch15" type="checkbox" value="true"> بهبود روش های فروش و صادرات
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch28" type="checkbox" value="true"> افزایش درآمد
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch03" type="checkbox" value="true"> صرفه جویی در هزینه ها
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch16" type="checkbox" value="true"> بهبود دسته بندی محصولات
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch29" type="checkbox" value="true"> افزایش تولید
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch04" type="checkbox" value="true"> صرفه جویی در وقت
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch17" type="checkbox" value="true"> بهبود روند توسعه
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch30" type="checkbox" value="true"> افزایش روحیه جمعی
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch05" type="checkbox" value="true"> کاهش هزینه های تعمیرات و نگهداری
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch18" type="checkbox" value="true"> بهبود شرایط فیزیکی محیط کار
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch31" type="checkbox" value="true"> افزایش کارایی کارکنان
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch06" type="checkbox" value="true"> کاهش ضایعات
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch19" type="checkbox" value="true"> بهبود ایمنی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch32" type="checkbox" value="true"> گسترش فعالیت ها
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch07" type="checkbox" value="true"> بهبود کیفیت
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch20" type="checkbox" value="true"> بهبود ارتباطات و روابط عمومی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch33" type="checkbox" value="true"> ایجاد درآمد
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch08" type="checkbox" value="true"> بهبود روش های بازاریابی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch21" type="checkbox" value="true"> اصلاح روش های اداری
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch34" type="checkbox" value="true"> ایجاد طرح تحقیقاتی جدید
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch09" type="checkbox" value="true"> بهبود امنیت شغلی کارکنان
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch22" type="checkbox" value="true"> اصلاح روش های آموزشی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch35" type="checkbox" value="true"> چند پیشه کردن
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch10" type="checkbox" value="true"> بهبود فعالیت های تبلیغاتی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch23" type="checkbox" value="true"> اصلاح روش های مالی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch36" type="checkbox" value="true"> بهسازی نیروی انسانی
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch11" type="checkbox" value="true"> بهبود روش های مهندسی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch24" type="checkbox" value="true"> اصلاح روش های تولید
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch37" type="checkbox" value="true"> استفاده بهینه از نیروی انسانی
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch12" type="checkbox" value="true"> بهبود رفاه کارکنان
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch25" type="checkbox" value="true"> اصلاح ساختار تشکیلاتی
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch13" type="checkbox" value="true"> بهبود ارتباط شغلی
                                                    </label>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="Ch26" type="checkbox" value="true"> افزایش ایمان و اعتماد گروهی
                                                    </label>
                                                </div>
                                            </td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- /.box-body -->
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="box">
                                    <div class="box-header">
                                        <h3 class="box-title">افراد پیشنهاد دهنده</h3>

                                        <div class="box-tools">
                                            <div class="input-group input-group-sm" style="width: 150px;">
                                                <input id="newPersonalyCode" type="text" name="table_search" class="form-control pull-right" placeholder="شماره پرسنلی">

                                                <div class="input-group-btn">
                                                    <button onclick="addNewRecommender()" type="button" class="btn btn-default"><i class="fas fa-user-plus"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /.box-header -->
                                    <div class="box-body table-responsive no-padding">
                                        <table class="table table-hover table-bordered">
                                            <tbody id="tblUserRecommender">
                                                <tr>
                                                    <th></th>
                                                    <th>شماره پرسنلی</th>
                                                    <th>نام و نام خانوادگی</th>
                                                    <th>اداره</th>
                                                    <th>درصد مشارکت</th>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- /.box-body -->
                                </div>
                                <!-- /.box -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputFile">
                                ارسال فایل
                                (
                                <span style="font-family:Georgia">zip,&nbsp;rar,&nbsp;7z</span>
                                )
                            </label>
                            <input accept=".zip,.rar,.7z" name="file" type="file" id="file">
                        </div>
                        <div class="form-group">
                            <label>واحد مورد نظر را انتخاب کنید</label>
                            <select id="WgName" style="padding:0" name="CommitteeID" class="form-control">
                                <option value="-1">انتخاب کنید ...</option>
                                @foreach (var committee in committees)
                                {
                                    <option value="@committee.ID">@committee.Name &nbsp;&nbsp;&nbsp;&nbsp; دبیر : @committee.Secretary.FirstName @committee.Secretary.LastName &nbsp;&nbsp;&nbsp;&nbsp; تلفن :@committee.Secretary.WorkPhone</option>
                                }
                            </select>
                        </div>
                        <div class="callout callout-info">
                            <h4 style="color: #0097bc">تذکر</h4>
                            <p style="color: #0097bc">
                                امتیاز
                                پیشنهاد تنها شامل فرد ثبت کننده پیشنهاد می شود و نفرات اضافه شده تنها در پاداش تصویب پیشنهاد به مقدار سهم مشارکت لحاظ شده در
                                سیستم اعمال میگردد و دبیرخانه نظام مشارکت هیچگونه تعهدی نسبت به درصد مشارکت افراد نداشته و قابلیت طرح دعوی برای این مورد
                                قابل قبول نمی باشد لذا خواهشمند است در زمان ثبت پیشنهاد گروهی به این مورد توجه ویژه نمایید
                            </p>
                        </div>
                    </div>
                </div>
                <div class="box-footer">
                    <button type="submit" class="btn btn-info pull-right">
                        ارسال
                    </button>
                </div>
            </form>
            <!-- /.col-->
        </div>
        <!-- ./row -->
    </section>
</div>
<!-- CK Editor -->
<script src="../../bower_components/ckeditor/ckeditor.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<!--<script src="../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>-->
<!-- TinyMCE Editor -->
<script src="../../bower_components/tinymce/tinymce.min.js"></script>
<script>
    new WOW().init();
    tinymce.init({
        selector: 'textarea#CurrentDescPr',
        plugins: 'advlist autolink link lists preview table code pagebreak',
        menubar: false,
        language: 'fa',
        height: 100,
        relative_urls: false,
        toolbar: 'undo redo | removeformat preview code | fontsizeselect bullist numlist | alignleft aligncenter alignright alignjustify | bold italic | pagebreak table link',
    });
    tinymce.init({
        selector: 'textarea#NewDesPr',
        plugins: 'advlist autolink link lists preview table code pagebreak',
        menubar: false,
        language: 'fa',
        height: 100,
        relative_urls: false,
        toolbar: 'undo redo | removeformat preview code | fontsizeselect bullist numlist | alignleft aligncenter alignright alignjustify | bold italic | pagebreak table link',
    });
    $(function () {
        // Replace the <textarea id="editor1"> with a CKEditor
        // instance, using default configuration.
        CKEDITOR.replace('editor1')
        //bootstrap WYSIHTML5 - text editor
        $('.textarea').wysihtml5()
    })
</script>
<!--افزودن و حذف یک شماره پرسنلی-->
<script>
    addNewRecommender(true);
    function addNewRecommender(init) {
        let newPersonalyCodeElement = document.getElementById("newPersonalyCode");
        let newPersonalyCode = newPersonalyCodeElement.value;
        if (newPersonalyCode == "") {
            newPersonalyCode=@User.Identity.Name;
        }
        let UsersRecomenders = document.querySelectorAll("#tblUserRecommender tr td:nth-child(2)");
        for (var i = 0; i < UsersRecomenders.length; i++) {
            if (UsersRecomenders[i].innerHTML == newPersonalyCode) {
                return
            }
        }
        let tblUserRecommender=document.getElementById("tblUserRecommender");
        if (tblUserRecommender.children.length<8) {
            $.ajax({
                url: "/User/GetUserByUserName",
                method: "GET",
                data: { userName: newPersonalyCode },
                success: (data) => {
                    if (data != null) {
                        if (!init) {
                            let childcount = tblUserRecommender.children.length-2;
                            let tr = document.createElement("tr");
                            let td0 = document.createElement("td");
                            td0.innerHTML = '<i title="حذف" onClick="removeNewRecommender(this.parentElement.parentElement)" style="cursor:pointer" class="fa fa-fw fa-remove"></i>';
                            let inpt = document.createElement('input');
                            inpt.setAttribute("name", "Helpers[" + childcount +"][UserID]");
                            inpt.setAttribute("style", "display:none");
                            inpt.setAttribute("value", data.id);
                            td0.appendChild(inpt);
                            let td1 = document.createElement("td");
                            td1.innerHTML = data.userName;
                            let td2 = document.createElement("td");
                            td2.innerHTML = data.firstName + " " + data.lastName;
                            let td3 = document.createElement("td");
                            td3.innerHTML = data.officeName;
                            let td4 = document.createElement("td");


                            let inptPercent = document.createElement('input');
                            inptPercent.addEventListener("keyup", (e) => {
                                let reg = document.getElementById('registrarPercent');
                                let percents = document.getElementsByClassName('Helpers');
                                if (e.target.value != '') {
                                    if (parseInt(e.target.value) > 100) {
                                        e.target.value = 100;
                                    }
                                    else if (parseInt(e.target.value) < 0) {
                                        e.target.value = 0;
                                    }
                                }
                                else {
                                    e.target.value = 0;
                                }
                                let sum = 0;
                                for (var i = 0; i < percents.length; i++) {
                                    percents[i].value = parseInt(percents[i].value);
                                    sum += parseInt(percents[i].value);
                                }
                                if (100 - sum < 0) {
                                    e.target.value = 0;
                                }
                                sum = 0;
                                for (var i = 0; i < percents.length; i++) {
                                    percents[i].value = parseInt(percents[i].value);
                                    sum += parseInt(percents[i].value);
                                }
                                reg.innerHTML = 100 - sum;

                            });
                            inptPercent.value = 0;
                            inptPercent.setAttribute("name", "Helpers[" + childcount + "][Percent]");
                            inptPercent.classList.add('form-control');
                            inptPercent.classList.add('Helpers');
                            inptPercent.setAttribute('type', 'number');
                            inptPercent.setAttribute('min', '0');
                            inptPercent.setAttribute('max', '100');


                            td4.appendChild(inptPercent);
                            tr.appendChild(td0);
                            tr.appendChild(td1);
                            tr.appendChild(td2);
                            tr.appendChild(td3);
                            tr.appendChild(td4);
                            tblUserRecommender.appendChild(tr);
                            newPersonalyCodeElement.value = "";
                        }
                        else {
                            let tr = document.createElement("tr");
                            let td0 = document.createElement("td");
                            td0.innerHTML = '';
                            let td1 = document.createElement("td");
                            td1.innerHTML = data.userName;
                            let td2 = document.createElement("td");
                            td2.innerHTML = data.firstName + " " + data.lastName;
                            let td3 = document.createElement("td");
                            td3.innerHTML = data.officeName;
                            let td4 = document.createElement("td");
                            td4.id ='registrarPercent';
                            td4.innerHTML = 100;
                            tr.appendChild(td0);
                            tr.appendChild(td1);
                            tr.appendChild(td2);
                            tr.appendChild(td3);
                            tr.appendChild(td4);
                            tblUserRecommender.appendChild(tr);
                            newPersonalyCodeElement.value = "";
                        }

                    }
                    else {
                        alert("کارمندی با این شماره پرسنلی یافت نشد. اگر از شماره پرسنلی مطمئن هستید با دبیرخانه نظام مشارکت تماس حاصل فرمایید.");
                    }
                },
                error: () => {

                }
            });
        }
        else {
            alert("تعداد افراد پیشنهاد دهنده حداکثر باید 7 نفر باشد.");
        }
    }
    function removeNewRecommender(element) {
        let tblUserRecommender = document.getElementById("tblUserRecommender");
        if (tblUserRecommender.children.length ==2) {
            alert("حداقل یک پیشنهاد کننده باید وجود داشته باشد.");
            return;
        }
        element.parentElement.removeChild(element);
    }
</script>
@*ویلیدیشن*@
<script>
    document.getElementById("form1").addEventListener('submit', (event) => {
        event.preventDefault();
        let resultofproposal = document.getElementById("resultofproposalTable").getElementsByTagName("input");

        let IsresultofproposalValid = false;
        for (var i = 0; i < resultofproposal.length; i++) {
            if (resultofproposal[i].checked) {
                IsresultofproposalValid = true;
                break;
            }
        }
        let CurrentDescPr = tinymce.get("CurrentDescPr").getContent()
        let NewDesPr = tinymce.get("NewDesPr").getContent()
        let WgName = document.getElementById("WgName").value;
        let SubjectPr = event.target["SubjectPr"].value;
        if (WgName == -1 || SubjectPr == "" ||
            CurrentDescPr == "" ||
            NewDesPr == "" ||
            !IsresultofproposalValid) {
            alert(" تمام فیلد های ستاره دار پر گردد.");
            return;
        }
        const file = document.getElementById("file");
        if (file.value != "") {
            let extension = file.value.split('.').pop().toLowerCase();
            if (extension != "rar" && extension != "zip" && extension != "7z") {
                alert("پسوند فایل ضمیمه باید یکی از انواع zip،rar،7z باشد.");
                return;
            }
            if (file.files[0].size / 1024 / 1024 > 10) {
                alert("حجم فایل حداکثر باید 10 مگابایت باشد.");
                return;
            }
        }
        let reg = document.getElementById('registrarPercent').innerHTML;
        if (parseInt(reg) > 100 || parseInt(reg) < 0 || isNaN(parseInt(reg)) || reg == '') {
            alert("مجموع درصد مشارکت نباید بزرگتر از صد و یا کوچکتر از صفر باشد.");
            return;
        }
        event.target.submit();
    });
</script>
@*seperate rial format*@
<script>
    function separate(str) {
        str = str.replace(/\,/g, '');
        var objRegex = new RegExp('(-?[0-9]+)([0-9]{3})');

        while (objRegex.test(str)) {
            str = str.replace(objRegex, '$1,$2');
        }
        return str;
    }
    document.addEventListener("DOMContentLoaded", () => {
        let rialsInputs = document.getElementsByClassName('rialformat');
        for (let i = 0; i < rialsInputs.length; i++) {
            rialsInputs[i].addEventListener('keyup', (e) => {
                e.target.value = separate(e.target.value);
            })
        }
    });
</script>
@*این اسکریپت برای این است که کاربر فقط ورودی های عددی را بگیریم*@
<script>
    $('.NumberOnly').keypress(function (event) {

        if (event.which != 8 && isNaN(String.fromCharCode(event.which))) {
            event.preventDefault(); //stop character from entering input
        }
    });
</script>